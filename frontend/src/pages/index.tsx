import { type NextPage } from "next";
import Head from "next/head";
import Image from "next/image";
import TextInput from "~/common/components/TextInput";
import Button from "~/common/components/Button";
import Table from "~/common/components/Table"



const Home: NextPage = () => {
  
  const roles = [{
    type: "Damage",
    champions: [{
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "57%",
      pickRate: "13%"
    },
    {
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "42%",
      pickRate: "7%"
    },
    {
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "56%",
      pickRate: "14%"
    }]
  },{
    type: "Support",
    champions: [{
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "57%",
      pickRate: "13%"
      
    },
    {
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "42%",
      pickRate: "7%"
    },
    {
      name: <><Image src="https://www.overbuff.com/_next/image?url=%2F_next%2Fstatic%2Fmedia%2Fgenji.af8825d2.png&w=3840&q=100" alt="" width={32} height={32} />Furia</>,
      winRate: "56%",
      pickRate: "14%"
    }]
    }].map(role => {
      const maxWinRate = role.champions.reduce((acc, curr) => {
        if (+curr.winRate > acc) {
          return +curr.winRate
        } else {
          return acc
        }
      },0)
      const maxPickRate = role.champions.reduce((acc, curr) => {
        if (+curr.pickRate > acc) {
          return +curr.pickRate
        } else {
          return acc
        }
      }, 0)
      const newChampions = role.champions.map(champion => {
        return {
          ...champion,
          winRate: {
            value: champion.winRate,
            bar: (+champion.winRate / maxWinRate) * 100,
          },
          pickRate: {
            value: champion.pickRate,
            bar: (+champion.pickRate / maxPickRate) * 100,
          }
        }
      })
      return {
        ...role,
        champions: newChampions
      }
  })

  
const headers = ["Champion", "Win Rate", "Pick Rate"]
  return (
    <>
      <Head>
        <title>Create T3 App</title>
        <meta name="description" content="Generated by create-t3-app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <div className="min-h-screen w-full bg-surface-600">
        <h2 className="font-title rounded-md p-2 text-center text-3xl font-bold uppercase  text-white">
          Welcome to the new Overbuff!
        </h2>

        <div className="grid grid-cols-2 gap-4 pt-4 md:grid-cols-4">
          <div className="flex flex-col items-center space-y-2">
            <div className="inline-flex rounded-full bg-sky-300 p-1 text-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                aria-hidden="true"
                className="h-3 w-3"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                ></path>
              </svg>
            </div>
            <div className="text-xs font-bold uppercase text-white md:text-sm">
              OW 2 Support
            </div>
          </div>

          <div className="flex flex-col items-center space-y-2">
            <div className="inline-flex rounded-full bg-sky-300 p-1 text-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                aria-hidden="true"
                className="h-3 w-3"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                ></path>
              </svg>
            </div>
            <div className="text-xs font-bold uppercase text-white md:text-sm">
              New Heroes
            </div>
          </div>

          <div className="flex flex-col items-center space-y-2">
            <div className="inline-flex rounded-full bg-sky-300 p-1 text-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                aria-hidden="true"
                className="h-3 w-3"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                ></path>
              </svg>
            </div>
            <div className="text-xs font-bold uppercase text-white md:text-sm">
              Added Stats
            </div>
          </div>

          <div className="flex flex-col items-center space-y-2">
            <div className="inline-flex rounded-full bg-sky-300 p-1 text-white">
              <svg
                xmlns="http://www.w3.org/2000/svg"
                fill="none"
                viewBox="0 0 24 24"
                strokeWidth="1.5"
                stroke="currentColor"
                aria-hidden="true"
                className="h-3 w-3"
              >
                <path
                  stroke-linecap="round"
                  stroke-linejoin="round"
                  d="M4.5 12.75l6 6 9-13.5"
                ></path>
              </svg>
            </div>
            <div className="text-xs font-bold uppercase text-white md:text-sm">
              Improved Rankings
            </div>
          </div>
        </div>
        <div className="border-brand-500 mx-auto my-8 w-full rounded-md border-2 border-sky-300 bg-black text-xl text-white shadow-lg md:w-[75%]">
          <TextInput
            className="p-4 text-xl"
            placeholder="Find player by username"
          />
        </div>

        <Button
          href="/"
          className="mx-auto block w-fit rounded-sm text-base font-semibold"
        >
          Sign in with Battle.net to see your stats!
        </Button>
        <Table data={roles[0]!.champions} headers={headers} />
        <Table data={roles[1]!.champions} headers={headers} />
        <Table data={roles[1]!.champions} headers={headers} />
      </div>
    </>
  );
};

export default Home;
